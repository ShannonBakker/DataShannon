<!doctype html>

<html>

	<head>
		<title>Foreign tourists</title>
		
		
	</head>
	<body>
		<script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.5.3/d3.min.js"></script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/topojson/1.6.9/topojson.min.js"></script>
		<script type="text/javascript" src="world-map.js"></script>
		<div id="container" style="position: relative; width: 500px; height: 300px;"></div>
		<script>
			var data = [["ABW", ""], ["AND", ""], ["AFG", "633.56924695192"], ["AGO", ""], ["ALB", "4564.39033869288"], ["ARB", "7446.76691996838"], ["ARE", "43962.713693201"], ["ARG", "12509.5311180615"], ["ARM", "3873.53356580682"], ["ASM", ""], ["ATG", "13432.0793301552"], ["AUS", "61979.8962947626"], ["AUT", "51122.4253136062"], ["AZE", "7886.45914367274"], ["BDI", "286.002335872952"], ["BEL", "47327.6204608156"], ["BEN", "903.464924007693"], ["BFA", "713.063889658834"], ["BGD", "1086.80707853522"], ["BGR", "7851.26542804234"], ["BHR", "24855.2156350086"], ["BHS", "22217.4941392075"], ["BIH", "4851.66035018113"], ["BLR", "8040.04755697133"], ["BLZ", "4831.17755186177"], ["BMU", ""], ["BOL", "3124.08076212353"], ["BRA", "11726.8058803488"], ["BRB", "15366.2926106288"], ["BRN", "40979.6419433378"], ["BTN", "2560.50115417183"], ["BWA", "7123.33924130145"], ["CAF", "358.537835857595"], ["CAN", "50230.8076901423"], ["CEB", "14082.0106173863"], ["CHE", "85616.5611964835"], ["CHI", ""], ["CHL", "14528.3258112673"], ["CHN", "7590.01644054361"], ["CIV", "1545.94224924803"], ["CMR", "1407.40341322234"], ["COG", "3147.07216061205"], ["COL", "7903.92577311647"], ["COM", "810.07576676222"], ["CPV", "3641.10765586575"], ["CRI", "10415.4443817218"], ["CSS", "10165.3326281428"], ["CUB", ""], ["CUW", ""], ["CYM", ""], ["CYP", "27194.3918374826"], ["CZE", "19502.4173306083"], ["DEU", "47773.9441928693"], ["DJI", "1813.59656630259"], ["DMA", "7244.49584708636"], ["DNK", "60718.3926958809"], ["DOM", "6163.57585665162"], ["DZA", "5484.0668056148"], ["EAP", "6240.4071477738"], ["EAS", "9482.07973272627"], ["ECA", "6895.66903820657"], ["ECS", "25703.245825993"], ["ECU", "6345.84072505948"], ["EGY", "3365.70742057477"], ["EMU", "39639.8123622324"], ["ERI", ""], ["ESP", "29721.6014855933"], ["EST", "20147.7782167553"], ["ETH", "573.565960346077"], ["EUU", "36447.8550869943"], ["FCS", "1528.53838518744"], ["FIN", "49842.7130622895"], ["FJI", "5112.32211740524"], ["FRA", "42725.7394894127"], ["FRO", ""], ["FSM", "3057.09102471788"], ["GAB", "10772.0617537637"], ["GBR", "46296.9846725052"], ["GEO", "4435.19269852547"], ["GHA", "1441.63645311166"], ["GIN", "539.615774988756"], ["GMB", "441.293411498563"], ["GNB", "567.822610297551"], ["GNQ", "18918.2768313328"], ["GRC", "21672.6717735205"], ["GRD", "8573.6940673666"], ["GRL", "43364.8828499176"], ["GTM", "3673.13584251267"], ["GUM", ""], ["GUY", "4053.90190377961"], ["HIC", "37792.7561528723"], ["HKG", "40169.5436383441"], ["HND", "2434.82716190676"], ["HPC", "898.044281024473"], ["HRV", "13475.2589621781"], ["HTI", "824.159773204545"], ["HUN", "14026.574374109"], ["IDN", "3491.92971737141"], ["IMN", ""], ["IND", "1581.51070308774"], ["INX", ""], ["IRL", "54339.3175599219"], ["IRN", "5442.87477076039"], ["IRQ", "6420.13980910095"], ["ISL", "52036.7318144531"], ["ISR", "37206.1829418069"], ["ITA", "35222.7606011111"], ["JAM", "5106.07746353193"], ["JOR", "5422.57087553321"], ["JPN", "36194.4156134427"], ["KAZ", "12601.6211150605"], ["KEN", "1358.26221855626"], ["KGZ", "1268.8566035996"], ["KHM", "1094.57668777899"], ["KIR", "1509.52118657047"], ["KNA", "15510.3939262063"], ["KOR", "27970.4951469293"], ["KSV", "4051.64836077068"], ["KWT", "43593.7020176514"], ["LAC", "9225.60336396899"], ["LAO", "1793.47049417605"], ["LBN", "10057.8883563669"], ["LBR", "457.858586520261"], ["LBY", "6573.38673726201"], ["LCA", "7647.52954784946"], ["LCN", "9985.30640257166"], ["LDC", "951.999439310987"], ["LIC", "639.651962041893"], ["LIE", ""], ["LKA", "3794.8875863911"], ["LMC", "2008.3843157096"], ["LMY", "4290.61133111491"], ["LSO", "1034.18528751221"], ["LTU", "16489.7289835331"], ["LUX", "116612.884151875"], ["LVA", "15692.1915611781"], ["MAC", "96038.0507240687"], ["MAF", ""], ["MAR", "3190.31044414024"], ["MCO", ""], ["MDA", "2238.90177377283"], ["MDG", "449.40082974561"], ["MDV", "7635.48415133126"], ["MEA", "8432.3295476394"], ["MEX", "10325.6460658759"], ["MHL", "3529.74830339742"], ["MIC", "4723.63077350744"], ["MKD", "5455.59488900156"], ["MLI", "704.507440024302"], ["MLT", ""], ["MMR", "1203.84466293825"], ["MNA", "4356.87563599445"], ["MNE", "7378.34528902948"], ["MNG", "4129.37354836224"], ["MNP", ""], ["MOZ", "585.622682636669"], ["MRT", "1274.97694896858"], ["MUS", "10016.6486405725"], ["MWI", "255.04456957319"], ["MYS", "11307.064952828"], ["NAC", "54194.6053820553"], ["NAM", "5408.24349093869"], ["NCL", ""], ["NER", "427.373240315359"], ["NGA", "3203.29682449432"], ["NIC", "1963.05488403363"], ["NLD", "52138.6839244096"], ["NOC", "18617.6136492259"], ["NOR", "97299.636068076"], ["NPL", "701.680063399496"], ["NZL", "44342.1644241792"], ["OEC", "43697.2196239015"], ["OED", "38422.5838587063"], ["OMN", "19309.6124499023"], ["OSS", "4799.40631681687"], ["PAK", "1316.61410969738"], ["PAN", "11948.8511416186"], ["PER", "6541.03056360677"], ["PHL", "2872.51216471657"], ["PLW", "11879.6778117315"], ["PNG", "2268.1587169891"], ["POL", "14336.7977208633"], ["PRI", ""], ["PRK", ""], ["PRT", "22124.3669649875"], ["PRY", "4712.82331151253"], ["PSS", "3760.70798646803"], ["PYF", ""], ["QAT", "96732.4025450739"], ["ROU", "10000.0026233174"], ["RUS", "12735.9184024927"], ["RWA", "695.689258600913"], ["SAS", "1504.04331047439"], ["SAU", "24406.4764554706"], ["SDN", "1875.84328741646"], ["SEN", "1067.131753327"], ["SGP", "56284.3314404291"], ["SLB", "2024.19041468429"], ["SLE", "765.959197296715"], ["SLV", "4119.99202319169"], ["SMR", ""], ["SOM", "542.615883955694"], ["SRB", "6152.92063374735"], ["SSA", "1775.54649470901"], ["SSD", "1115.09351560879"], ["SSF", "1791.24945830418"], ["SST", "5963.44599949303"], ["STP", "1810.72156651041"], ["SUR", "9680.11591367368"], ["SVK", "18500.6646092218"], ["SVN", "24001.9013862278"], ["SWE", "58898.9275256779"], ["SWZ", "3477.14924295591"], ["SXM", ""], ["SYC", "15564.641970499"], ["SYR", ""], ["TCA", ""], ["TCD", "1024.66845170869"], ["TGO", "635.044267662456"], ["THA", "5977.38058711461"], ["TJK", "1114.00748334195"], ["TKM", "9031.51156969781"], ["TLS", "1169.03870697884"], ["TON", "4113.99349306787"], ["TTO", "21323.754712196"], ["TUN", "4420.69843516059"], ["TUR", "10515.007820334"], ["TUV", "3826.90290129881"], ["TZA", "955.141311392161"], ["UGA", "714.567345401347"], ["UKR", "3082.46144707019"], ["UMC", "8030.33104398355"], ["URY", "16806.7732671439"], ["USA", "54629.4951678912"], ["UZB", "2036.69172343054"], ["VCT", "6668.88610501504"], ["VEN", ""], ["VIR", ""], ["VNM", "2052.31908380089"], ["VUT", "3147.96377889252"], ["PSE", "2965.90367459511"], ["WLD", "10738.831492412"], ["WSM", "4172.21710037661"], ["YEM", ""], ["ZAF", "6483.85457472843"], ["COD", "442.339539367328"], ["ZMB", "1721.62327411224"], ["ZWE", "931.1981869586"]];
			for (i = 0; i < data.length; i++){
				if(data[i][1] == ""){
					data[i][1] = "missing"
				}
				else{
					data[i][1] = Number(data[i][1]).toFixed(2)
				}
			}
				console.log(data)
			
			var dataset = {};
			
			var onlyValues = data.map(function(obj){ 
			if (obj[1] != "missing"){
			return obj[1]
			}
			else{
			return 6000
			}; 
			});
			console.log(onlyValues)
    var minValue = Math.min.apply(null, onlyValues),
            maxValue = Math.max.apply(null, onlyValues);
			
    // create color palette function
    // color can be whatever you wish
    var paletteScale = d3.scale.linear()
            .domain([minValue,maxValue])
            .range(["#EFEFFF","#02386F"]); // blue color

			
			
			// fill dataset in appropriate format
			data.forEach(function(item){ //
			// item example value ["USA", 70]
			var iso = item[0],
                value = item[1];
			if (value=="missing"){
				dataset[iso] = { numberOfThings: value, fillColor: "red" };
			} 
			else{ 
				dataset[iso] = { numberOfThings: value, fillColor: paletteScale(value) };
			}
    });
	
    // render map
    new Datamap({
        element: document.getElementById('container'),
        projection: 'mercator', // big world map
        // countries don't listed in dataset will be painted with this color
        fills: { defaultFill: '#F5F5F5' },
        data: dataset,
        geographyConfig: {
            borderColor: '#DEDEDE',
            highlightBorderWidth: 2,
            // don't change color on mouse hover
            highlightFillColor: 'pink',
            // only change border
            highlightBorderColor: '#B7B7B7',
            // show desired information in tooltip
            popupTemplate: function(geo, data) {
                // don't show tooltip if country don't present in dataset
                if (!data) { return ; }
                // tooltip content
                return ['<div class="hoverinfo">',
                    '<strong>', geo.properties.name, '</strong>',
                    '<br>GDP per capita: <strong> $ ', data.numberOfThings, '</strong>',
                    '</div>'].join('');
            }
        }
    });
			
			
				
		</script>
	</body>
	
</html>